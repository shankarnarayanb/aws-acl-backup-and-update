# Quick Reference Guide

## Files
- `update_nacl.py` - Main script to update NACL rules
- `restore_nacl.py` - Script to restore from backup
- `USAGE_INSTRUCTIONS.md` - Full documentation

## Quick Start

### 1. Configure (edit update_nacl.py)
```python
NACL_IDS = ['acl-12345678', 'acl-87654321']
ALLOWED_IPS = ['1.2.3.4/32', '10.0.0.0/16']
```

### 2. Update NACLs
```bash
python3 update_nacl.py
```
This will:
- Create a backup automatically
- Update your NACLs with new rules
- Tell you the backup file location

### 3. Restore if needed
```bash
# List available backups
python3 restore_nacl.py

# Restore from specific backup
python3 restore_nacl.py ./nacl_backups/nacl_backup_20241027_143022.json
```

## What Gets Created

### Backup Files
Location: `./nacl_backups/`
Format: `nacl_backup_YYYYMMDD_HHMMSS.json`

Contains:
- All existing egress rules for each NACL
- Timestamp
- Everything needed to restore

### New Rules (after update)
- Rule 100+: ALLOW your specified IPs
- Rule 32766: DENY all other traffic
- Rule 32767: Default rule (unchanged)

## AWS Credentials
Required environment variables:
```bash
export AWS_ACCESS_KEY_ID="your-key"
export AWS_SECRET_ACCESS_KEY="your-secret"
export AWS_DEFAULT_REGION="us-east-1"
```

## Dependencies
```bash
pip install boto3
```

## Important Notes
⚠️ Always test in non-production first
⚠️ Backups are created automatically
⚠️ Keep your backup files safe
✓ You can run restore_nacl.py multiple times with the same backup
